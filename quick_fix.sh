#!/bin/bash
# ะััััะพะต ะธัะฟัะฐะฒะปะตะฝะธะต ะพัะธะฑะพะบ ะทะฐัะฒะพะบ ะฝะฐ ัะตัะฒะตัะต Ubuntu

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ                                                        โ"
echo "โ     ะะกะะะะะะะะะ ะะจะะะะ ะะะฏะะะ - BOLT WEB APP         โ"
echo "โ                                                        โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

# ะัะพะฒะตัะบะฐ, ััะพ ะผั ะฒ ะฟัะฐะฒะธะปัะฝะพะน ะดะธัะตะบัะพัะธะธ
if [ ! -f "web_app.py" ]; then
    echo "โ ะัะธะฑะบะฐ: web_app.py ะฝะต ะฝะฐะนะดะตะฝ!"
    echo "ะะตัะตะนะดะธัะต ะฒ ะดะธัะตะบัะพัะธั ะฟัะพะตะบัะฐ:"
    echo "  cd /root/TelegrammBolt"
    exit 1
fi

echo "๐ ะจะฐะณ 1: ะะธะฐะณะฝะพััะธะบะฐ ัะธััะตะผั..."
python3 server_check.py
echo ""

read -p "ะัะพะดะพะปะถะธัั ั ะฟะตัะตะทะฐะฟััะบะพะผ? (y/n) " -n 1 -r
echo ""
if [[ $REPLY =~ ^[Yy]$ ]]; then
    echo "๐ ะจะฐะณ 2: ะะตัะตะทะฐะฟััะบ ะฒะตะฑ-ัะตัะฒะตัะฐ..."
    bash restart_web.sh
    echo ""
    
    echo "โ ะะพัะพะฒะพ!"
    echo ""
    echo "๐ ะกะปะตะดัััะธะต ัะฐะณะธ:"
    echo "  1. ะัะบัะพะนัะต ะทะฐัะฒะบั ะฒ ะฑัะฐัะทะตัะต"
    echo "  2. ะกะผะพััะธัะต ะปะพะณะธ: tail -f web.log"
    echo "  3. ะัะปะธ ะพัะธะฑะบะฐ - ะทะฐะฟัััะธัะต: python3 diagnose_dse.py"
else
    echo "ะัะผะตะฝะตะฝะพ."
fi
