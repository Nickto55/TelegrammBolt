# üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

## –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –°–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ **–ù–ï –î–û–õ–ñ–ù–´** –ø–æ–ø–∞–¥–∞—Ç—å –≤ git:

### –¢–æ–∫–µ–Ω—ã –∏ –∫–ª—é—á–∏
- `config/ven_bot.json` - BOT_TOKEN Telegram
- `config/smtp_config.json` - SMTP –ø–∞—Ä–æ–ª–∏
- –õ—é–±—ã–µ —Ñ–∞–π–ª—ã —Å `.secret` –∏–ª–∏ `.key` —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º

### –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `data/` - –í–°–Ø –ø–∞–ø–∫–∞ (–∑–∞—è–≤–∫–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —á–∞—Ç—ã)
- `photos/` - –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∑–∞—è–≤–æ–∫

### –ë—ç–∫–∞–ø—ã
- `backup_*/` - –õ—é–±—ã–µ –±—ç–∫–∞–ø—ã —Å –¥–∞—Ç–æ–π
- `archive/` - –ê—Ä—Ö–∏–≤ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤
- `.docs_backup_*/` - –ë—ç–∫–∞–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º `git push` –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
git status --ignored

# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –Ω–µ—Ç
git ls-files | Select-String -Pattern "ven_bot.json|smtp_config|bot_data|users_data|backup"
```

## –ï—Å–ª–∏ —Å–ª—É—á–∞–π–Ω–æ –∑–∞–∫–æ–º–º–∏—Ç–∏–ª–∏ —Å–µ–∫—Ä–µ—Ç—ã

### 1. –£–¥–∞–ª–∏—Ç—å –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞
```bash
git rm --cached config/ven_bot.json
git commit --amend -m "Remove secrets"
git push --force
```

### 2. –£–¥–∞–ª–∏—Ç—å –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ (–µ—Å–ª–∏ —É–∂–µ –∑–∞–ø—É—à–∏–ª–∏)
```bash
# –û–ü–ê–°–ù–û! –ü–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç –∏—Å—Ç–æ—Ä–∏—é!
git filter-branch --force --index-filter \
  "git rm --cached --ignore-unmatch config/ven_bot.json" \
  --prune-empty --tag-name-filter cat -- --all

git push origin --force --all
```

### 3. –°–º–µ–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω—ã!
**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –ø–æ–ø–∞–ª –≤ git - —Å—á–∏—Ç–∞–π—Ç–µ –µ–≥–æ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º:
1. –ó–∞–π–¥–∏—Ç–µ –≤ @BotFather
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/token` ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ ‚Üí `/revoke`
3. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω
4. –û–±–Ω–æ–≤–∏—Ç–µ `config/ven_bot.json`

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .gitignore

–§–∞–π–ª `.gitignore` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–∂–Ω–æ —Ç–∞–∫:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∞–π–ª –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
git check-ignore -v config/ven_bot.json

# –î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏:
# .gitignore:XX:config/ven_bot.json    config/ven_bot.json
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
```bash
# –ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ
git status
git diff --staged

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ .gitignore
# –•—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –¢–û–õ–¨–ö–û –ª–æ–∫–∞–ª—å–Ω–æ
```

### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
```bash
# –ù–ï –¥–µ–ª–∞–π—Ç–µ —Ç–∞–∫!
git add .  # –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏
git commit -am "fix"  # –±–µ–∑ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
git push  # –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á—Ç–æ –∫–æ–º–º–∏—Ç–∏—Ç–µ
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ pre-commit hook:

```bash
# .git/hooks/pre-commit
#!/bin/sh
if git diff --cached --name-only | grep -E "ven_bot\.json|smtp_config\.json|bot_data\.json|users_data\.json"; then
    echo "‚ùå –û–®–ò–ë–ö–ê: –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã!"
    echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ .gitignore"
    exit 1
fi
```

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ —É—Ç–µ—á–∫–µ

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ** —Å–º–µ–Ω–∏—Ç–µ –≤—Å–µ —Ç–æ–∫–µ–Ω—ã –∏ –ø–∞—Ä–æ–ª–∏
2. –£–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª—ã –∏–∑ git –∏—Å—Ç–æ—Ä–∏–∏ (—Å–º. –≤—ã—à–µ)
3. Force push –Ω–æ–≤—É—é –∏—Å—Ç–æ—Ä–∏—é
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ GitHub –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –¥–æ—Å—Ç—É–ø–∞
5. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
# –ü–æ–∏—Å–∫ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏
git log --all --full-history -- config/ven_bot.json

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ!
```
