# üìä –ú–æ–Ω–∏—Ç–æ—Ä –±–æ—Ç–∞ TelegrammBolt

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–º –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

## üöÄ –ó–∞–ø—É—Å–∫

### Linux/Ubuntu
```bash
# –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)
chmod +x start_monitor.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä
./start_monitor.sh
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Python:
```bash
python3 monitor.py
```

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìä –í–∫–ª–∞–¥–∫–∞ "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
- **–°—Ç–∞—Ç—É—Å –±–æ—Ç–∞**: —Ä–∞–±–æ—Ç–∞–µ—Ç/–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- **Uptime**: –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –≤—Å–µ–≥–æ/–∞–∫—Ç–∏–≤–Ω—ã—Ö
- **–î–°–ï –∑–∞–ø–∏—Å–µ–π**: –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- **–ó–∞–ø—Ä–æ—Å—ã**: –≤—Å–µ–≥–æ –∏ –≤ –º–∏–Ω—É—Ç—É
- **–ü–∞–º—è—Ç—å**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM
- **–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### üìã –í–∫–ª–∞–¥–∫–∞ "–õ–æ–≥–∏"
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –±–æ—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü—Ä–æ–∫—Ä—É—Ç–∫–∞: `‚Üë` / `‚Üì` –∏–ª–∏ `PgUp` / `PgDn`
- –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤

### üë• –í–∫–ª–∞–¥–∫–∞ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–æ—Ç–∞
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: ID, –∏–º—è, —Ä–æ–ª—å, –ø–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–æ–ª—è–º
- –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å–ø–∏—Å–∫–∞: `‚Üë` / `‚Üì`

### ‚öôÔ∏è –í–∫–ª–∞–¥–∫–∞ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"
- **R** - –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- **C** - –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
- **L** - –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏
- **W** - –°–±—Ä–æ—Å–∏—Ç—å watcher
- **S** - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏

## ‚å®Ô∏è –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

| –ö–ª–∞–≤–∏—à–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| `Tab` / `‚Üí` | –°–ª–µ–¥—É—é—â–∞—è –≤–∫–ª–∞–¥–∫–∞ |
| `Shift+Tab` / `‚Üê` | –ü—Ä–µ–¥—ã–¥—É—â–∞—è –≤–∫–ª–∞–¥–∫–∞ |
| `‚Üë` / `‚Üì` | –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑ |
| `PgUp` / `PgDn` | –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ |
| `Home` | –í –Ω–∞—á–∞–ª–æ |
| `End` | –í –∫–æ–Ω–µ—Ü |
| `Q` / `Ctrl+C` | –í—ã—Ö–æ–¥ |

–ù–∞ –≤–∫–ª–∞–¥–∫–µ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ":
- `R` - Reload stats
- `C` - Clear cache
- `L` - Clear logs
- `W` - Reset watcher
- `S` - Stop tasks

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Bot.py    ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ monitor_stats.json‚îÇ
‚îÇ             ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ  (–ø–∏—à–µ—Ç     ‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   —Å—Ç–∞—Ç—É—Å)   ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇmonitor_commands  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ     .json        ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚ñ≤
                               ‚îÇ
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îÇ  monitor.py  ‚îÇ
                        ‚îÇ  (—á–∏—Ç–∞–µ—Ç –∏   ‚îÇ
                        ‚îÇ   –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç ‚îÇ
                        ‚îÇ   –∫–æ–º–∞–Ω–¥—ã)   ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –§–∞–π–ª—ã –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏

**monitor_stats.json** - –ë–æ—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å—é–¥–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
```json
{
  "status": "running",
  "uptime": 3600,
  "users_total": 25,
  "users_active": 5,
  "dse_total": 150,
  "requests_total": 1234,
  "requests_per_minute": 12.5,
  "memory_mb": 125.6,
  "last_update": "2025-10-17 15:30:45"
}
```

**monitor_commands.json** - –ú–æ–Ω–∏—Ç–æ—Ä –ø–∏—à–µ—Ç –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –±–æ—Ç–∞:
```json
{
  "commands": [
    {"cmd": "reload_stats", "timestamp": "2025-10-17 15:30:00"},
    {"cmd": "clear_cache", "timestamp": "2025-10-17 15:31:00"}
  ]
}
```

**bot_monitor.log** - –õ–æ–≥–∏ –±–æ—Ç–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –º–æ–Ω–∏—Ç–æ—Ä–µ

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ú–æ–Ω–∏—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Python + `psutil` –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ pip
pip install psutil

# –ò–ª–∏ —á–µ—Ä–µ–∑ requirements.txt
pip install -r requirements.txt
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**: –ú–æ–Ω–∏—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –±–æ—Ç–∞. –ï—Å–ª–∏ –±–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –º–æ–Ω–∏—Ç–æ—Ä –≤—Å—ë —Ä–∞–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.

2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –ë–æ—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥. –ú–æ–Ω–∏—Ç–æ—Ä —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã.

3. **–ö–æ–º–∞–Ω–¥—ã**: –ö–æ–º–∞–Ω–¥—ã –æ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±–æ—Ç–æ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ. –†–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–º.

4. **–õ–æ–≥–∏**: –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫. –î–ª—è –ø–æ–ª–Ω—ã—Ö –ª–æ–≥–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
   ```bash
   tail -f bot_monitor.log
   ```

5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ú–æ–Ω–∏—Ç–æ—Ä –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –º–∏–Ω–∏–º—É–º —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞.

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ú–æ–Ω–∏—Ç–æ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
chmod +x start_monitor.sh

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Python –≤–µ—Ä—Å–∏—é (–Ω—É–∂–µ–Ω 3.7+)
python3 --version

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ psutil
pip3 install psutil
```

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –º–æ–Ω–∏—Ç–æ—Ä–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω: `systemctl status telegrambot`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞: `ls -la monitor_stats.json`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞: `journalctl -u telegrambot -f`

### –ö–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å: `ls -la monitor_commands.json`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç —á–∏—Ç–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã (–≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ –æ–± –æ–±—Ä–∞–±–æ—Ç–∫–µ –∫–æ–º–∞–Ω–¥)

## üìö –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å systemd

–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä –∫–∞–∫ systemd —Å–ª—É–∂–±—É:

```bash
sudo nano /etc/systemd/system/telegrambot-monitor.service
```

```ini
[Unit]
Description=TelegrammBolt Monitor
After=telegrambot.service

[Service]
Type=simple
User=telegrambot
WorkingDirectory=/opt/telegrambot
Environment="TERM=xterm-256color"
ExecStart=/opt/telegrambot/.venv/bin/python /opt/telegrambot/monitor.py
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
```

–ó–∞–ø—É—Å–∫:
```bash
sudo systemctl daemon-reload
sudo systemctl enable telegrambot-monitor
sudo systemctl start telegrambot-monitor
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ñ–æ–Ω–µ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
```bash
./start_monitor.sh > monitor_output.log 2>&1 &
```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ tmux/screen
```bash
# –ß–µ—Ä–µ–∑ tmux
tmux new -s bot-monitor
./start_monitor.sh

# –ß–µ—Ä–µ–∑ screen
screen -S bot-monitor
./start_monitor.sh
```

### SSH —Ç—É–Ω–Ω–µ–ª—å –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```bash
ssh -t user@server "cd /opt/telegrambot && ./start_monitor.sh"
```

---

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫**: TelegrammBolt Team  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–õ–∏—Ü–µ–Ω–∑–∏—è**: MIT
