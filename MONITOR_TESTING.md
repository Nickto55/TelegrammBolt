# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∞

## –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (–±–µ–∑ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞)

### 1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
```bash
python3 test_monitor_data.py
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç:
- `monitor_stats.json` - —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `monitor_commands.json` - —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `bot_monitor.log` - —Ç–µ—Å—Ç–æ–≤—ã–µ –ª–æ–≥–∏

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä
```bash
python3 monitor.py
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

**–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤–∫–ª–∞–¥–∫–∞–º:**
- `Tab` - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ 4 –≤–∫–ª–∞–¥–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

**–í–∫–ª–∞–¥–∫–∞ "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞":**
- –î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- –°—Ç–∞—Ç—É—Å: RUNNING (–∑–µ–ª—ë–Ω—ã–π)
- Uptime: 3600 —Å–µ–∫
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 25 –≤—Å–µ–≥–æ, 5 –∞–∫—Ç–∏–≤–Ω—ã—Ö

**–í–∫–ª–∞–¥–∫–∞ "–õ–æ–≥–∏":**
- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å 6 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
- –†–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è INFO, SUCCESS, WARN, ERROR
- `‚Üë`/`‚Üì` –¥–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏

**–í–∫–ª–∞–¥–∫–∞ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏":**
- –ú–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏" (–Ω–æ—Ä–º–∞–ª—å–Ω–æ –±–µ–∑ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞)

**–í–∫–ª–∞–¥–∫–∞ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ":**
- –î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–æ–º–∞–Ω–¥—ã
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–∂–∞—Ç—å `R`, `C`, `S`

**–í—ã—Ö–æ–¥:**
- `Q` –∏–ª–∏ `Ctrl+C`

## –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç (—Å –±–æ—Ç–æ–º)

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
```bash
python3 bot.py
```

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–∑–¥–∞—Å—Ç `monitor_stats.json`
- –ù–∞—á–Ω—ë—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- –ë—É–¥–µ—Ç –ø–∏—Å–∞—Ç—å –ª–æ–≥–∏ –≤ `bot_monitor.log`

### 2. –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä
```bash
# –ù–æ–≤–æ–µ –æ–∫–Ω–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
python3 monitor.py
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∂–∏–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- Uptime –¥–æ–ª–∂–µ–Ω —Ä–∞—Å—Ç–∏
- Memory –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–µ–∞–ª—å–Ω–∞—è
- Last update –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ ~2 —Å–µ–∫—É–Ω–¥—ã

**–õ–æ–≥–∏:**
- –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –ø—Ä–∏ –¥–µ–π—Å—Ç–≤–∏—è—Ö –≤ –±–æ—Ç–µ

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**
- –î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ `users_data.json`

**–ö–æ–º–∞–Ω–¥—ã:**
- –ù–∞–∂–º–∏—Ç–µ `R` –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ª–æ–≥–∞—Ö –±–æ—Ç–∞ –ø–æ—è–≤–∏–ª–æ—Å—å: "–ö–æ–º–∞–Ω–¥–∞ restart_watcher..."

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞: "expect bytes or str, got NoneType"
**–ü—Ä–∏—á–∏–Ω–∞:** –§–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–æ–∑–¥–∞–Ω—ã –∏–ª–∏ –ø—É—Å—Ç—ã

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
python3 test_monitor_data.py

# –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ —Å–Ω–∞—á–∞–ª–∞
python3 bot.py &
# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5 —Å–µ–∫—É–Ω–¥
python3 monitor.py
```

### –ú–æ–Ω–∏—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "unknown" —Å—Ç–∞—Ç—É—Å
**–ü—Ä–∏—á–∏–Ω–∞:** –ë–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ —Ñ–∞–π–ª `monitor_stats.json` –ø—É—Å—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª
cat monitor_stats.json

# –ï—Å–ª–∏ –ø—É—Å—Ç - –∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∏–ª–∏ —Ç–µ—Å—Ç
python3 test_monitor_data.py
```

### –õ–æ–≥–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
**–ü—Ä–∏—á–∏–Ω–∞:** –§–∞–π–ª `bot_monitor.log` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
python3 test_monitor_data.py

# –ò–ª–∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ, –ø–æ–∫–∞ –±–æ—Ç –∑–∞–ø–∏—à–µ—Ç –ø–µ—Ä–≤—ã–π –ª–æ–≥
```

### –ö–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
**–ü—Ä–∏—á–∏–Ω–∞:** –ë–æ—Ç –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª `monitor_commands.json`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω
ps aux | grep bot.py

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
tail -f bot_monitor.log

# –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø–∏—Å–∏ –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

### monitor_stats.json
```json
{
  "status": "running",
  "uptime": 3600,
  "users_total": 25,
  "users_active": 5,
  "dse_total": 150,
  "requests_total": 1234,
  "requests_per_minute": 12.5,
  "memory_mb": 125.6,
  "last_update": "2025-10-17T15:30:00"
}
```

### monitor_commands.json
```json
{
  "commands": [
    {
      "command": "reload_stats",
      "timestamp": "2025-10-17 15:30:00",
      "status": "completed"
    }
  ]
}
```

### bot_monitor.log
```
[2025-10-17 15:00:00] [INFO] üöÄ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω
[2025-10-17 15:01:00] [SUCCESS] ‚úÖ –°–µ—Ä–≤–∏—Å—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

```bash
# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
python3 test_monitor_data.py

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä –Ω–∞ 5 —Å–µ–∫—É–Ω–¥
timeout 5 python3 monitor.py || echo "–ú–æ–Ω–∏—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–ª –±–µ–∑ –æ—à–∏–±–æ–∫"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã
ls -la monitor_*.json bot_monitor.log
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
python3 bot.py &
BOT_PID=$!

# 2. –ü–æ–¥–æ–∂–¥–∞—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
sleep 10

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
if [ -f "monitor_stats.json" ]; then
    echo "‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∞"
    cat monitor_stats.json | jq .
else
    echo "‚ùå –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞"
fi

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä –Ω–∞ 10 —Å–µ–∫—É–Ω–¥
timeout 10 python3 monitor.py || echo "‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä –æ—Ç—Ä–∞–±–æ—Ç–∞–ª"

# 5. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
kill $BOT_PID
```

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í—Å–µ —ç—Ç–∏ —Ç–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã –∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–∞–±–æ—á–∏–µ –¥–∞–Ω–Ω—ã–µ –±–æ—Ç–∞.
